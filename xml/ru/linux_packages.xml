<!--
  Copyright (C) Nginx, Inc.
  -->

<!DOCTYPE article SYSTEM "../../dtd/article.dtd">

<article name="nginx: пакеты для Linux"
         link="/ru/linux_packages.html"
         lang="ru"
         rev="27"
         toc="no">

<section id="distributions">

<para>
В данный момент доступны готовые пакеты для следующих дистрибутивов и их
версий:
</para>

<para>
RHEL/CentOS:

<table note="yes">

<tr>
<td width="20%">Версия</td>
<td>Поддерживаемые платформы</td>
</tr>

<tr>
<td width="20%">6.x</td>
<td>x86_64, i386</td>
</tr>

<tr>
<td width="20%">7.4+</td>
<td>x86_64, ppc64le</td>
</tr>

</table>
</para>

<para>
Debian:

<table note="yes">

<tr>
<td width="20%">Версия</td>
<td width="20%">Кодовое имя</td>
<td>Поддерживаемые платформы</td>
</tr>

<tr>
<td width="20%">8.x</td>
<td width="20%">jessie</td>
<td>x86_64, i386</td>
</tr>

<tr>
<td width="20%">9.x</td>
<td width="20%">stretch</td>
<td>x86_64, i386</td>
</tr>

</table>
</para>

<para>
Ubuntu:

<table note="yes">

<tr>
<td width="20%">версия</td>
<td width="20%">Кодовое имя</td>
<td>Поддерживаемые платформы</td>
</tr>

<tr>
<td width="20%">14.04</td>
<td width="20%">trusty</td>
<td>x86_64, i386, aarch64/arm64</td>
</tr>

<tr>
<td width="20%">16.04</td>
<td width="20%">xenial</td>
<td>x86_64, i386, ppc64el, aarch64/arm64</td>
</tr>

<tr>
<td width="20%">17.10</td>
<td width="20%">artful</td>
<td>x86_64, i386</td>
</tr>

</table>
</para>

<para>
SLES:

<table note="yes">
<tr>
<td width="20%">Версия</td>
<td>Поддерживаемые платформы</td>
</tr>

<tr>
<td width="20%">12</td>
<td>x86_64</td>
</tr>

</table>
</para>

<para>
Чтобы включить автоматическое обновление пакетов для Linux,
настройте репозиторий yum для дистрибутивов RHEL/CentOS,
репозиторий apt для дистрибутивов Debian/Ubuntu,
или репозиторий zypper для SLES.
</para>

</section>


<section name="Готовые пакеты стабильной версии" id="stable">

<para>
Для настройки репозитория yum для RHEL/CentOS необходимо
создать файл с именем <path>/etc/yum.repos.d/nginx.repo</path>
и таким содержимым:

<programlisting>
[nginx]
name=nginx repo
baseurl=http://nginx.org/packages/OS/OSRELEASE/$basearch/
gpgcheck=0
enabled=1
</programlisting>

Замените “<literal>OS</literal>” на “<literal>rhel</literal>” или
“<literal>centos</literal>”,
в зависимости от используемого дистрибутива, а “<literal>OSRELEASE</literal>”
на “<literal>6</literal>” или “<literal>7</literal>”, для, соответственно, 6.x
или 7.x версий.
</para>

<para>
Для Debian/Ubuntu, для проверки подлинности подписи репозитория nginx,
и чтобы избавиться от предупреждений об отсутствующем PGP-ключе во время
установки пакета nginx, необходимо добавить ключ, которым были подписаны
пакеты и репозиторий nginx, в связку ключей программы <command>apt</command>.
Загрузите <link url="/keys/nginx_signing.key">этот
ключ</link> с нашего веб-сайта и добавьте его в связку ключей программы
<command>apt</command>, выполнив команду:
<programlisting>
sudo apt-key add nginx_signing.key
</programlisting>
</para>

<para>
Для Debian замените <i>codename</i> на
<link id="distributions">кодовое имя</link> дистрибутива,
и добавьте в конец файла <path>/etc/apt/sources.list</path>
следующее:

<programlisting>
deb http://nginx.org/packages/debian/ <i>codename</i> nginx
deb-src http://nginx.org/packages/debian/ <i>codename</i> nginx
</programlisting>
</para>

<para>
Для Ubuntu замените <i>codename</i> на
<link id="distributions">кодовое имя</link> дистрибутива,
и добавьте в конец файла <path>/etc/apt/sources.list</path>
следующее:

<programlisting>
deb http://nginx.org/packages/ubuntu/ <i>codename</i> nginx
deb-src http://nginx.org/packages/ubuntu/ <i>codename</i> nginx
</programlisting>
</para>

<para>
Для Debian/Ubuntu затем выполните команды:
<programlisting>
apt-get update
apt-get install nginx
</programlisting>
</para>

<para>
Для SLES выполните команду:
<programlisting>
zypper addrepo -G -t yum -c 'http://nginx.org/packages/sles/12' nginx
</programlisting>
</para>

</section>


<section name="Готовые пакеты mainline-версии" id="mainline">

<para>
Для настройки репозитория yum для RHEL/CentOS необходимо
создать файл с именем <path>/etc/yum.repos.d/nginx.repo</path>
и таким содержимым:

<programlisting>
[nginx]
name=nginx repo
baseurl=http://nginx.org/packages/mainline/OS/OSRELEASE/$basearch/
gpgcheck=0
enabled=1
</programlisting>

Замените “<literal>OS</literal>” на “<literal>rhel</literal>” или
“<literal>centos</literal>”,
в зависимости от используемого дистрибутива, а “<literal>OSRELEASE</literal>”
на “<literal>6</literal>” или “<literal>7</literal>”, для, соответственно, 6.x
или 7.x версий.
</para>

<para>
Для Debian/Ubuntu, для проверки подлинности подписи репозитория nginx,
и чтобы избавиться от предупреждений об отсутствующем PGP-ключе во время
установки пакета nginx, необходимо добавить ключ, которым были подписаны
пакеты и репозиторий nginx, в связку ключей программы <command>apt</command>.
Загрузите <link url="/keys/nginx_signing.key">этот
ключ</link> с нашего веб-сайта и добавьте его в связку ключей программы
<command>apt</command>, выполнив команду:
<programlisting>
sudo apt-key add nginx_signing.key
</programlisting>
</para>

<para>
Для Debian замените <i>codename</i> на
<link id="distributions">кодовое имя</link> дистрибутива,
и добавьте в конец файла <path>/etc/apt/sources.list</path>
следующее:

<programlisting>
deb http://nginx.org/packages/mainline/debian/ <i>codename</i> nginx
deb-src http://nginx.org/packages/mainline/debian/ <i>codename</i> nginx
</programlisting>
</para>

<para>
Для Ubuntu замените <i>codename</i> на
<link id="distributions">кодовое имя</link> дистрибутива,
и добавьте в конец файла <path>/etc/apt/sources.list</path>
следующее:

<programlisting>
deb http://nginx.org/packages/mainline/ubuntu/ <i>codename</i> nginx
deb-src http://nginx.org/packages/mainline/ubuntu/ <i>codename</i> nginx
</programlisting>
</para>

<para>
Для Debian/Ubuntu затем выполните команды:
<programlisting>
apt-get update
apt-get install nginx
</programlisting>
</para>

<para>
Для SLES выполните команду:
<programlisting>
zypper addrepo -G -t yum -c 'http://nginx.org/packages/mainline/sles/12' nginx
</programlisting>
</para>

</section>


<section name="Пакеты с исходным кодом" id="sourcepackages">

<para>
Исходные коды пакетов находятся в соответствующем
<link url="http://hg.nginx.org/pkg-oss">репозитории</link>.
</para>

<para>
Ветка репозитория <literal>default</literal> содержит исходные коды пакетов для
mainline-версии, в то время как ветки <literal>stable-*</literal> содержат
исходные коды пакетов для стабильных релизов.
Для сборки бинарных пакетов запустите <command>make</command> в каталоге
<path>debian/</path> для Debian/Ubuntu или в каталоге
<path>rpm/SPECS/</path> для RHEL/CentOS/SLES.
</para>

<para>
Исходные коды пакетов распространяются под той же
<link url="../LICENSE">BSD-подобной лицензией из 2 пунктов</link>,
что и сам nginx.
</para>

</section>


<section name="Динамические модули" id="dynmodules">

<para>
Для того чтобы избежать увеличения числа зависимостей, основной пакет nginx не
включает модули, которым требуются дополнительные библиотеки.
Начиная с версии 1.9.11 nginx поддерживает
<link doc="docs/ngx_core_module.xml" id="load_module">динамические
модули</link>, и следующие модули собираются как динамические и поставляются в
виде отдельных пакетов:
<programlisting>
nginx-module-geoip
nginx-module-image-filter
nginx-module-njs
nginx-module-perl
nginx-module-xslt
</programlisting>
</para>

</section>


<section name="Подписи" id="signatures">

<para>
Для проверки целостности и происхождения загруженного пакета
и в случае RPM, и в случае репозиториев Debian/Ubuntu используется
цифровая подпись.
Для проверки подписи необходимо загрузить
<link url="/keys/nginx_signing.key">этот ключ</link>
и импортировать его в связку ключей программы <command>rpm</command>
или <command>apt</command>:

<list type="bullet">

<listitem>
Для Debian/Ubuntu:
<programlisting>sudo apt-key add nginx_signing.key</programlisting>
</listitem>

<listitem>
Для RHEL/CentOS:
<programlisting>sudo rpm --import nginx_signing.key</programlisting>
</listitem>

<listitem>
Для SLES:
<programlisting>sudo rpm --import nginx_signing.key</programlisting>
</listitem>

</list>
</para>

<para>
В Debian/Ubuntu/SLES подпись проверяется по умолчанию, однако
в RHEL/CentOS необходимо добавить
<programlisting>gpgcheck=1</programlisting> в файл
<path>/etc/yum.repos.d/nginx.repo</path>.
</para>

<para>
Поскольку наши <link doc="../en/pgp_keys.xml">PGP-ключи</link>
находятся на том же сервере, что и пакеты,
им следует доверять в равной степени.
Поэтому мы настоятельно рекомендуем дополнительно проверить
подлинность загруженных PGP-ключей.
В PGP есть понятие “сети доверия”,
когда ключ подписывается чьим-либо другим ключом,
тот в свою очередь третьим, и т.д.
Это зачастую позволяет построить цепочку от произвольного ключа
до ключа человека, которого вы знаете и кому доверяете лично,
и таким образом удостовериться в подлинности первого ключа в цепочке.
Подробно эта концепция описана в
<link url="http://www.dewinter.com/gnupg_howto/english/GPGMiniHowto-1.html">
GPG Mini Howto</link>.
У наших ключей есть достаточное количество подписей,
поэтому проверить их подлинность относительно несложно.
</para>

</section>

</article>
